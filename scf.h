/*
    Project: spiffs_config_file
    Microcontroller: ESP32
    Ide: Arduino
    Author: Junon M.
    Version: 1.0.1
    Date: 2022/07/05
*/

#ifndef scf_h
#define scf_h
#include <Arduino.h>

class scf
{
  private:
    String _file_name;
    String _file_content;

    void write_txt_file(String path, String content);

  public:

    //----------------------------------------------------------------------------------------
    // Constructor
    //----------------------------------------------------------------------------------------
    scf();
    //----------------------------------------------------------------------------------------

    //----------------------------------------------------------------------------------------
    // Destructor
    //----------------------------------------------------------------------------------------
    virtual ~scf();
    //----------------------------------------------------------------------------------------

    //----------------------------------------------------------------------------------------
    // Informs if the file exists
    //----------------------------------------------------------------------------------------
    bool file_exists();
    //----------------------------------------------------------------------------------------

    //----------------------------------------------------------------------------------------
    // Set Filename
    //----------------------------------------------------------------------------------------
    void set_filename(String FileName);
    //----------------------------------------------------------------------------------------

    //----------------------------------------------------------------------------------------
    // Conversions
    //----------------------------------------------------------------------------------------    
    uint64_t string_2_uint64(String from);
    String uint64_2_string(uint64_t from);
    //----------------------------------------------------------------------------------------

    //----------------------------------------------------------------------------------------
    // Reads a previously written key from the file
    //----------------------------------------------------------------------------------------
    String get_str(String Label);
    double get_double(String Label);
    long get_long(String Label);
    uint64_t get_uint64(String Label);
    //----------------------------------------------------------------------------------------

    //----------------------------------------------------------------------------------------
    // Create a new key in the file
    //----------------------------------------------------------------------------------------
    void set_str(String Label, String Value);
    void set_double(String Label, double Value);
    void set_long(String Label, long Value);
    void set_uint64(String Label, uint64_t Value);
    //----------------------------------------------------------------------------------------

    //----------------------------------------------------------------------------------------
    // Save keys and values to file
    //----------------------------------------------------------------------------------------
    void commit();
    //----------------------------------------------------------------------------------------

};

#endif /* scf_h */
